# ğŸ­ Ø®Ø·Ø© ØªÙ†ÙÙŠØ° Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø§Ù„ÙƒØ§Ù…Ù„ - Huda ERP

## ğŸ“‹ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·Ø© ØªÙ‡Ø¯Ù Ù„Ø¥ÙƒÙ…Ø§Ù„ ØªÙ†ÙÙŠØ° Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„ØªØ¯ÙÙ‚ Ø§Ù„Ø¹Ù…Ù„ ÙÙŠ Ø§Ù„ÙˆØ±Ø´Ø© Ù…Ù† Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ø§Ù„ØªØ³Ù„ÙŠÙ… Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ.

**Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:** 45% Ù…ÙÙ†ÙØ°  
**Ø§Ù„Ù‡Ø¯Ù:** 100% ØªÙ†ÙÙŠØ° ÙƒØ§Ù…Ù„  
**Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:** 6-8 Ø£Ø³Ø§Ø¨ÙŠØ¹  
**Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø±Ø§Ø­Ù„:** 5 Ù…Ø±Ø§Ø­Ù„ Ø±Ø¦ÙŠØ³ÙŠØ©

---

## ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ù†ÙˆØ§Ù‚Øµ Ø§Ù„Ø­Ø±Ø¬Ø©

### âŒ Ù…Ø§ ÙŠØ¬Ø¨ ØªÙ†ÙÙŠØ°Ù‡ (55%)
1. Ù†Ø¸Ø§Ù… QR Code Ù„Ù„Ø¹Ù…Ø§Ù„ (0%)
2. Ù†Ø¸Ø§Ù… Attendance & Time Tracking (0%)
3. Production Logs Ø¨Ø§Ù„Ù‚Ø·Ø¹Ø© (0%)
4. Auto-assign Ø°ÙƒÙŠ Ù„Ù„Ø¹Ù…Ø§Ù„ (0%)
5. Quality Check Workflow (0%)
6. Labor Cost Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª ÙØ¹Ù„ÙŠØ© (20%)
7. Payroll Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„ (40%)
8. PDF/Excel Export (0%)
9. Accounting Observers (50%)
10. Real-time Alerts (30%)

---

## ğŸ¯ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© (2-3 Ø£Ø³Ø§Ø¨ÙŠØ¹)

### Ø§Ù„Ø£Ù‡Ø¯Ø§Ù
- Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø­Ø¶ÙˆØ± ÙˆØ§Ù†ØµØ±Ø§Ù
- ØªØ³Ø¬ÙŠÙ„ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„Ø¥Ø¶Ø§ÙÙŠ
- ØªØªØ¨Ø¹ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø¨Ø§Ù„Ù‚Ø·Ø¹Ø©
- Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø¬ÙˆØ± Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ©

### ğŸ“ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©

#### 1.1 Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ Attendance Records
**Ø§Ù„Ù…Ù„Ù:** `database/migrations/YYYY_MM_DD_create_attendance_records_table.php`

```php
Schema::create('attendance_records', function (Blueprint $table) {
    $table->id();
    $table->foreignId('employee_id')->constrained()->onDelete('cascade');
    $table->date('date');
    $table->time('check_in')->nullable();
    $table->time('check_out')->nullable();
    $table->decimal('hours_worked', 5, 2)->default(0);
    $table->decimal('overtime_hours', 5, 2)->default(0);
    $table->string('status')->default('present'); // present, absent, late, half_day
    $table->text('notes')->nullable();
    $table->timestamps();
    
    $table->unique(['employee_id', 'date']);
    $table->index('date');
    $table->index('status');
});
```

#### 1.2 Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ Production Logs
**Ø§Ù„Ù…Ù„Ù:** `database/migrations/YYYY_MM_DD_create_production_logs_table.php`

```php
Schema::create('production_logs', function (Blueprint $table) {
    $table->id();
    $table->foreignId('employee_id')->constrained()->onDelete('cascade');
    $table->foreignId('production_stage_id')->constrained()->onDelete('cascade');
    $table->foreignId('product_id')->constrained()->onDelete('cascade');
    $table->integer('pieces_completed')->default(0);
    $table->decimal('rate_per_piece', 8, 3)->nullable();
    $table->dateTime('start_time');
    $table->dateTime('end_time')->nullable();
    $table->integer('duration_minutes')->nullable(); // Ù…Ø­Ø³ÙˆØ¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
    $table->decimal('earnings', 10, 3)->default(0); // Ù…Ø­Ø³ÙˆØ¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
    $table->decimal('expected_duration', 5, 2)->nullable(); // Ø¨Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚
    $table->decimal('efficiency_rate', 5, 2)->nullable(); // Ù†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ©
    $table->string('quality_status')->default('pending'); // pending, approved, rejected
    $table->text('notes')->nullable();
    $table->timestamps();
    
    $table->index(['employee_id', 'start_time']);
    $table->index('production_stage_id');
    $table->index('quality_status');
});
```

#### 1.3 ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Employees
**Ø§Ù„Ù…Ù„Ù:** `database/migrations/YYYY_MM_DD_add_attendance_fields_to_employees_table.php`

```php
Schema::table('employees', function (Blueprint $table) {
    $table->string('salary_type')->default('monthly'); // monthly, per_piece, hourly
    $table->decimal('rate_per_hour', 8, 3)->nullable();
    $table->decimal('rate_per_piece', 8, 3)->nullable();
    $table->string('attendance_device_id')->nullable(); // ZKTeco ID
    $table->json('skills')->nullable(); // ['cutting', 'sewing', 'embroidery']
    $table->decimal('efficiency_rating', 3, 2)->default(1.00); // 1.00 = 100%
    $table->integer('current_workload')->default(0); // Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØ©
});
```

#### 1.4 Ø¥Ù†Ø´Ø§Ø¡ Models

**AttendanceRecord.php**
```php
<?php
namespace App\Models;

class AttendanceRecord extends Model
{
    protected $fillable = [
        'employee_id', 'date', 'check_in', 'check_out',
        'hours_worked', 'overtime_hours', 'status', 'notes'
    ];

    protected $casts = [
        'date' => 'date',
        'hours_worked' => 'decimal:2',
        'overtime_hours' => 'decimal:2',
    ];

    public function employee()
    {
        return $this->belongsTo(Employee::class);
    }

    // Auto-calculate hours on save
    protected static function boot()
    {
        parent::boot();
        
        static::saving(function ($record) {
            if ($record->check_in && $record->check_out) {
                $start = \Carbon\Carbon::parse($record->check_in);
                $end = \Carbon\Carbon::parse($record->check_out);
                $totalHours = $end->diffInMinutes($start) / 60;
                
                $record->hours_worked = min($totalHours, 8);
                $record->overtime_hours = max(0, $totalHours - 8);
            }
        });
    }
}
```

**ProductionLog.php**
```php
<?php
namespace App\Models;

class ProductionLog extends Model
{
    protected $fillable = [
        'employee_id', 'production_stage_id', 'product_id',
        'pieces_completed', 'rate_per_piece', 'start_time',
        'end_time', 'duration_minutes', 'earnings',
        'expected_duration', 'efficiency_rate',
        'quality_status', 'notes'
    ];

    protected $casts = [
        'start_time' => 'datetime',
        'end_time' => 'datetime',
        'rate_per_piece' => 'decimal:3',
        'earnings' => 'decimal:3',
        'efficiency_rate' => 'decimal:2',
    ];

    public function employee()
    {
        return $this->belongsTo(Employee::class);
    }

    public function productionStage()
    {
        return $this->belongsTo(ProductionStage::class);
    }

    public function product()
    {
        return $this->belongsTo(Product::class);
    }

    protected static function boot()
    {
        parent::boot();
        
        static::saving(function ($log) {
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¯Ø©
            if ($log->start_time && $log->end_time) {
                $log->duration_minutes = $log->start_time->diffInMinutes($log->end_time);
            }
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­
            if ($log->pieces_completed && $log->rate_per_piece) {
                $log->earnings = $log->pieces_completed * $log->rate_per_piece;
            }
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„ÙƒÙØ§Ø¡Ø©
            if ($log->expected_duration && $log->duration_minutes) {
                $log->efficiency_rate = ($log->expected_duration / $log->duration_minutes) * 100;
            }
        });
    }
}
```

#### 1.5 Ø¥Ù†Ø´Ø§Ø¡ Controllers

**AttendanceController.php**
- `index()` - Ø¹Ø±Ø¶ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ±
- `create()` - ØªØ³Ø¬ÙŠÙ„ Ø­Ø¶ÙˆØ± Ø¬Ø¯ÙŠØ¯
- `store()` - Ø­ÙØ¸ Ø§Ù„Ø­Ø¶ÙˆØ±
- `bulkCheckIn()` - ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¬Ù…Ø§Ø¹ÙŠ
- `bulkCheckOut()` - ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ Ø¬Ù…Ø§Ø¹ÙŠ
- `monthlyReport()` - ØªÙ‚Ø±ÙŠØ± Ø´Ù‡Ø±ÙŠ

**ProductionLogController.php**
- `index()` - Ø¹Ø±Ø¶ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬
- `create()` - ØªØ³Ø¬ÙŠÙ„ Ø¥Ù†ØªØ§Ø¬ Ø¬Ø¯ÙŠØ¯
- `store()` - Ø­ÙØ¸ Ø§Ù„Ø¥Ù†ØªØ§Ø¬
- `complete()` - Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø±Ø­Ù„Ø©
- `approve()` - Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø¬ÙˆØ¯Ø©
- `reject()` - Ø±ÙØ¶ Ø§Ù„Ø¬ÙˆØ¯Ø©

#### 1.6 Ø¥Ù†Ø´Ø§Ø¡ Views

**attendance/index.blade.php**
- Ø¬Ø¯ÙˆÙ„ Ø¨Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ±
- ÙÙ„ØªØ±Ø© Ø¨Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ù…ÙˆØ¸Ù
- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª (Ø­Ø§Ø¶Ø±ØŒ ØºØ§Ø¦Ø¨ØŒ Ù…ØªØ£Ø®Ø±)

**attendance/create.blade.php**
- Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø­Ø¶ÙˆØ±
- Ø§Ø®ØªÙŠØ§Ø± Ù…ÙˆØ¸Ù
- ÙˆÙ‚Øª Ø§Ù„Ø¯Ø®ÙˆÙ„/Ø§Ù„Ø®Ø±ÙˆØ¬

**production-logs/index.blade.php**
- Ø¬Ø¯ÙˆÙ„ Ø¨Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬
- ÙÙ„ØªØ±Ø© Ø¨Ø§Ù„Ù…ÙˆØ¸Ù ÙˆØ§Ù„Ù…Ø±Ø­Ù„Ø©
- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙƒÙØ§Ø¡Ø©

#### 1.7 Routes
```php
// Attendance
Route::resource('attendance', AttendanceController::class);
Route::post('attendance/bulk-check-in', [AttendanceController::class, 'bulkCheckIn']);
Route::post('attendance/bulk-check-out', [AttendanceController::class, 'bulkCheckOut']);
Route::get('attendance/report/{month}', [AttendanceController::class, 'monthlyReport']);

// Production Logs
Route::resource('production-logs', ProductionLogController::class);
Route::post('production-logs/{log}/complete', [ProductionLogController::class, 'complete']);
Route::post('production-logs/{log}/approve', [ProductionLogController::class, 'approve']);
Route::post('production-logs/{log}/reject', [ProductionLogController::class, 'reject']);
```

### âœ… Ù…Ø®Ø±Ø¬Ø§Øª Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰
- âœ… Ù†Ø¸Ø§Ù… Ø­Ø¶ÙˆØ± ÙˆØ§Ù†ØµØ±Ø§Ù ÙƒØ§Ù…Ù„
- âœ… ØªØªØ¨Ø¹ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø¨Ø§Ù„Ù‚Ø·Ø¹Ø©
- âœ… Ø­Ø³Ø§Ø¨ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„Ø¥Ø¶Ø§ÙÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ÙƒÙØ§Ø¡Ø© ÙˆØ§Ù„Ø£Ø¯Ø§Ø¡
- âœ… ÙˆØ§Ø¬Ù‡Ø§Øª Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¶ÙˆØ± ÙˆØ§Ù„Ø¥Ù†ØªØ§Ø¬

---

## ğŸ¯ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ù†Ø¸Ø§Ù… QR Code ÙˆØ§Ù„ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø°ÙƒÙŠ (2 Ø£Ø³Ø¨ÙˆØ¹)

### Ø§Ù„Ø£Ù‡Ø¯Ø§Ù
- ØªÙ…ÙƒÙŠÙ† Ø§Ù„Ø¹Ù…Ø§Ù„ Ù…Ù† Ø§Ù„Ù…Ø³Ø­ Ø§Ù„Ø¶ÙˆØ¦ÙŠ
- ØªØ³Ø¬ÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„ÙˆÙ‚Øª
- ØªÙˆØ²ÙŠØ¹ Ø°ÙƒÙŠ Ù„Ù„Ù…Ù‡Ø§Ù…
- ÙˆØ§Ø¬Ù‡Ø© Ù…ÙˆØ¨Ø§ÙŠÙ„ Ù„Ù„Ø¹Ù…Ø§Ù„

### ğŸ“ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©

#### 2.1 ØªØ«Ø¨ÙŠØª Ù…ÙƒØªØ¨Ø§Øª QR Code
```bash
composer require simplesoftwareio/simple-qrcode
composer require bacon/bacon-qr-code
```

#### 2.2 Ø¥Ø¶Ø§ÙØ© Ø­Ù‚ÙˆÙ„ QR Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ†
```php
Schema::table('employees', function (Blueprint $table) {
    $table->string('qr_code')->unique()->nullable();
    $table->string('qr_image_path')->nullable();
    $table->boolean('qr_enabled')->default(true);
});
```

#### 2.3 Ø¥Ù†Ø´Ø§Ø¡ Service Ù„Ù„Ù€ QR
**QRCodeService.php**
```php
<?php
namespace App\Services;

use SimpleSoftwareIO\QrCode\Facades\QrCode;
use App\Models\Employee;

class QRCodeService
{
    public function generateForEmployee(Employee $employee)
    {
        // ØªÙˆÙ„ÙŠØ¯ Ø±Ù…Ø² ÙØ±ÙŠØ¯
        $code = 'EMP-' . str_pad($employee->id, 6, '0', STR_PAD_LEFT) . '-' . uniqid();
        
        // Ø­ÙØ¸ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        $employee->qr_code = $code;
        
        // ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø© QR
        $qrImage = QrCode::format('png')
            ->size(300)
            ->margin(1)
            ->generate($code);
        
        // Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø©
        $path = 'qr-codes/employees/' . $employee->id . '.png';
        \Storage::disk('public')->put($path, $qrImage);
        
        $employee->qr_image_path = $path;
        $employee->save();
        
        return $employee;
    }
    
    public function validateQRCode($code)
    {
        return Employee::where('qr_code', $code)
            ->where('qr_enabled', true)
            ->first();
    }
}
```

#### 2.4 Ø¥Ù†Ø´Ø§Ø¡ Auto-Assign Service
**ProductionAssignmentService.php**
```php
<?php
namespace App\Services;

use App\Models\Employee;
use App\Models\ProductionStage;

class ProductionAssignmentService
{
    public function findBestEmployee($stageName, $productId)
    {
        return Employee::where('is_active', true)
            ->whereJsonContains('skills', $stageName)
            ->orderByRaw('current_workload ASC')
            ->orderByRaw('efficiency_rating DESC')
            ->first();
    }
    
    public function assignStage(ProductionStage $stage, Employee $employee = null)
    {
        if (!$employee) {
            $employee = $this->findBestEmployee(
                $stage->stage_name,
                $stage->productionOrder->product_id
            );
        }
        
        if (!$employee) {
            throw new \Exception('No suitable employee found');
        }
        
        $stage->employee_id = $employee->id;
        $stage->status = 'assigned';
        $stage->save();
        
        // Ø²ÙŠØ§Ø¯Ø© workload
        $employee->increment('current_workload');
        
        return $stage;
    }
    
    public function completeStage(ProductionStage $stage)
    {
        $stage->status = 'completed';
        $stage->end_time = now();
        $stage->save();
        
        // ØªÙ‚Ù„ÙŠÙ„ workload
        if ($stage->employee) {
            $stage->employee->decrement('current_workload');
        }
    }
}
```

#### 2.5 Ø¥Ù†Ø´Ø§Ø¡ QR Scanner Page
**Views: qr-scanner.blade.php**
```html
@extends('layouts.app')

@section('content')
<div class="container mx-auto p-6" x-data="qrScanner()">
    <div class="bg-white rounded-lg shadow-lg p-8">
        <h1 class="text-3xl font-bold mb-6">ğŸ” QR Code Scanner</h1>
        
        <!-- Video Stream -->
        <div class="mb-6">
            <video id="qr-video" class="w-full max-w-md mx-auto rounded-lg"></video>
        </div>
        
        <!-- Status -->
        <div x-show="scannedEmployee" class="bg-green-100 p-4 rounded-lg mb-4">
            <p class="text-lg">Employee: <span x-text="scannedEmployee"></span></p>
        </div>
        
        <!-- Actions -->
        <div class="grid grid-cols-2 gap-4 max-w-md mx-auto">
            <button @click="checkIn()" class="bg-green-600 text-white px-6 py-3 rounded-lg">
                Check In
            </button>
            <button @click="checkOut()" class="bg-red-600 text-white px-6 py-3 rounded-lg">
                Check Out
            </button>
        </div>
    </div>
</div>

<script src="https://unpkg.com/html5-qrcode"></script>
<script>
function qrScanner() {
    return {
        scannedEmployee: null,
        employeeId: null,
        
        init() {
            const scanner = new Html5Qrcode("qr-video");
            scanner.start(
                { facingMode: "environment" },
                { fps: 10, qrbox: 250 },
                (decodedText) => {
                    this.validateQR(decodedText);
                }
            );
        },
        
        validateQR(code) {
            fetch('/api/qr/validate', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ code })
            })
            .then(r => r.json())
            .then(data => {
                this.scannedEmployee = data.employee.name;
                this.employeeId = data.employee.id;
            });
        },
        
        checkIn() {
            // Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
        },
        
        checkOut() {
            // Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬
        }
    }
}
</script>
@endsection
```

#### 2.6 API Routes Ù„Ù„Ù€ QR
```php
Route::post('api/qr/validate', [QRController::class, 'validate']);
Route::post('api/qr/check-in', [QRController::class, 'checkIn']);
Route::post('api/qr/check-out', [QRController::class, 'checkOut']);
Route::post('api/qr/start-stage', [QRController::class, 'startStage']);
Route::post('api/qr/complete-stage', [QRController::class, 'completeStage']);
```

### âœ… Ù…Ø®Ø±Ø¬Ø§Øª Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©
- âœ… QR Code Ù„ÙƒÙ„ Ù…ÙˆØ¸Ù
- âœ… Scanner page Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
- âœ… ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„/Ø®Ø±ÙˆØ¬ Ø¹Ø¨Ø± QR
- âœ… Auto-assign Ø°ÙƒÙŠ Ù„Ù„Ù…Ù‡Ø§Ù…
- âœ… ØªØ­Ø¯ÙŠØ« workload ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

---

## ğŸ¯ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©: Payroll Ø§Ù„ÙƒØ§Ù…Ù„ ÙˆØ§Ù„ØªÙƒØ§Ù…Ù„ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠ (1.5 Ø£Ø³Ø¨ÙˆØ¹)

### Ø§Ù„Ø£Ù‡Ø¯Ø§Ù
- ÙƒØ´Ù Ø±ÙˆØ§ØªØ¨ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ©
- Ø­Ø³Ø§Ø¨ ØªÙƒÙ„ÙØ© Ø§Ù„Ø¹Ù…Ø§Ù„Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
- Ù‚ÙŠÙˆØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
- ØªÙ‚Ø§Ø±ÙŠØ± Ø±ÙˆØ§ØªØ¨

### ğŸ“ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©

#### 3.1 ØªØ­Ø¯ÙŠØ« PayrollService
```php
<?php
namespace App\Services;

class PayrollService
{
    public function generateMonthly($month, $employeeIds = null)
    {
        $employees = Employee::when($employeeIds, function($q) use ($employeeIds) {
            $q->whereIn('id', $employeeIds);
        })->get();
        
        foreach ($employees as $employee) {
            $this->generateForEmployee($employee, $month);
        }
    }
    
    public function generateForEmployee(Employee $employee, $month)
    {
        // 1. Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ±
        $attendance = AttendanceRecord::where('employee_id', $employee->id)
            ->whereMonth('date', $month)
            ->get();
        
        $totalHours = $attendance->sum('hours_worked');
        $overtimeHours = $attendance->sum('overtime_hours');
        $daysPresent = $attendance->where('status', 'present')->count();
        
        // 2. Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬
        $productionLogs = ProductionLog::where('employee_id', $employee->id)
            ->whereMonth('start_time', $month)
            ->where('quality_status', 'approved')
            ->get();
        
        $productionEarnings = $productionLogs->sum('earnings');
        $totalPieces = $productionLogs->sum('pieces_completed');
        
        // 3. Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±Ø§ØªØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
        $baseSalary = 0;
        
        if ($employee->salary_type === 'monthly') {
            $workingDays = Setting::get('working_days_per_month', 26);
            $baseSalary = $employee->base_salary * ($daysPresent / $workingDays);
        } elseif ($employee->salary_type === 'hourly') {
            $baseSalary = $totalHours * $employee->rate_per_hour;
        } elseif ($employee->salary_type === 'per_piece') {
            $baseSalary = $productionEarnings;
        }
        
        // 4. Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ
        $overtimeRate = Setting::get('overtime_multiplier', 1.5);
        $overtimeAmount = 0;
        
        if ($employee->salary_type === 'monthly') {
            $hourlyRate = $employee->base_salary / (26 * 8);
            $overtimeAmount = $overtimeHours * $hourlyRate * $overtimeRate;
        } elseif ($employee->salary_type === 'hourly') {
            $overtimeAmount = $overtimeHours * $employee->rate_per_hour * $overtimeRate;
        }
        
        // 5. Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª ÙˆØ§Ù„Ø®ØµÙˆÙ…Ø§Øª
        $bonuses = $this->calculateBonuses($employee, $productionLogs);
        $deductions = $this->calculateDeductions($employee, $attendance);
        
        // 6. Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ
        $totalAmount = $baseSalary + $overtimeAmount + $bonuses - $deductions;
        
        // 7. Ø¥Ù†Ø´Ø§Ø¡ Ø³Ø¬Ù„ Ø§Ù„Ø±Ø§ØªØ¨
        return Payroll::create([
            'employee_id' => $employee->id,
            'period_start' => Carbon::parse($month)->startOfMonth(),
            'period_end' => Carbon::parse($month)->endOfMonth(),
            'base_salary' => $baseSalary,
            'overtime_hours' => $overtimeHours,
            'overtime_amount' => $overtimeAmount,
            'bonuses' => $bonuses,
            'deductions' => $deductions,
            'total_amount' => $totalAmount,
            'status' => 'draft',
            'metadata' => [
                'days_present' => $daysPresent,
                'total_hours' => $totalHours,
                'pieces_completed' => $totalPieces,
                'efficiency_avg' => $productionLogs->avg('efficiency_rate'),
            ]
        ]);
    }
    
    private function calculateBonuses($employee, $productionLogs)
    {
        $bonus = 0;
        
        // Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„ÙƒÙØ§Ø¡Ø© Ø§Ù„Ø¹Ø§Ù„ÙŠØ©
        $avgEfficiency = $productionLogs->avg('efficiency_rate');
        if ($avgEfficiency > 120) {
            $bonus += 50; // 50 Ø¯ÙŠÙ†Ø§Ø±
        } elseif ($avgEfficiency > 100) {
            $bonus += 25;
        }
        
        // Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬
        $totalPieces = $productionLogs->sum('pieces_completed');
        if ($totalPieces > 500) {
            $bonus += 100;
        } elseif ($totalPieces > 300) {
            $bonus += 50;
        }
        
        return $bonus;
    }
    
    private function calculateDeductions($employee, $attendance)
    {
        $deduction = 0;
        
        // Ø®ØµÙ… Ø§Ù„ØºÙŠØ§Ø¨
        $absences = $attendance->where('status', 'absent')->count();
        $dailyRate = $employee->base_salary / 26;
        $deduction += $absences * $dailyRate;
        
        // Ø®ØµÙ… Ø§Ù„ØªØ£Ø®ÙŠØ±
        $lateCount = $attendance->where('status', 'late')->count();
        if ($lateCount > 3) {
            $deduction += ($lateCount - 3) * 5; // 5 Ø¯ÙŠÙ†Ø§Ø± Ù„ÙƒÙ„ ØªØ£Ø®ÙŠØ± Ø¨Ø¹Ø¯ Ø§Ù„Ø«Ø§Ù„Ø«
        }
        
        return $deduction;
    }
}
```

#### 3.2 ØªØ­Ø¯ÙŠØ« ProductCostCalculator
```php
public function calculateLaborCost(Product $product, $quantity = 1)
{
    // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ© Ù…Ù† production_logs
    $logs = ProductionLog::where('product_id', $product->id)
        ->where('quality_status', 'approved')
        ->latest()
        ->take(10) // Ø¢Ø®Ø± 10 Ø³Ø¬Ù„Ø§Øª
        ->get();
    
    if ($logs->count() > 0) {
        // Ù…ØªÙˆØ³Ø· ØªÙƒÙ„ÙØ© Ø§Ù„Ø¹Ù…Ø§Ù„Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ©
        $avgLaborCost = $logs->avg('earnings');
        return $avgLaborCost * $quantity;
    }
    
    // Fallback Ù„Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ø«Ø§Ø¨ØªØ©
    $materialCost = $this->calculateMaterialCost($product, $quantity);
    $laborPercentage = Setting::get('labor_cost_percentage', 30) / 100;
    
    return $materialCost * $laborPercentage;
}
```

#### 3.3 Ø¥Ù†Ø´Ø§Ø¡ Observers Ù„Ù„Ù‚ÙŠÙˆØ¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©

**PayrollObserver.php**
```php
<?php
namespace App\Observers;

use App\Models\Payroll;
use App\Services\AccountingService;

class PayrollObserver
{
    public function paid(Payroll $payroll)
    {
        $accountingService = app(AccountingService::class);
        
        // Ù‚ÙŠØ¯ ØµØ±Ù Ø§Ù„Ø±Ø§ØªØ¨
        $accountingService->recordPayrollExpense(
            $payroll->employee,
            $payroll->total_amount,
            $payroll->period_start,
            'payroll_payment',
            $payroll->id
        );
    }
}
```

**MaterialMovementObserver.php**
```php
<?php
namespace App\Observers;

use App\Models\InventoryMovement;
use App\Services\AccountingService;

class MaterialMovementObserver
{
    public function created(InventoryMovement $movement)
    {
        if ($movement->movement_type === 'consumption') {
            $accountingService = app(AccountingService::class);
            
            $totalCost = $movement->quantity * $movement->material->unit_cost;
            
            // Ù‚ÙŠØ¯ Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø§Ù„Ù…ÙˆØ§Ø¯
            $accountingService->recordMaterialConsumption(
                $movement->material,
                $totalCost,
                $movement->reference_type,
                $movement->reference_id
            );
        }
    }
}
```

#### 3.4 ØªØ³Ø¬ÙŠÙ„ Observers
```php
// AppServiceProvider.php
public function boot()
{
    Payroll::observe(PayrollObserver::class);
    InventoryMovement::observe(MaterialMovementObserver::class);
}
```

### âœ… Ù…Ø®Ø±Ø¬Ø§Øª Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©
- âœ… ÙƒØ´Ù Ø±ÙˆØ§ØªØ¨ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª ÙØ¹Ù„ÙŠØ©
- âœ… Ø­Ø³Ø§Ø¨ ØªÙƒÙ„ÙØ© Ø¹Ù…Ø§Ù„Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©
- âœ… Ù‚ÙŠÙˆØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù„ÙƒÙ„ Ø¹Ù…Ù„ÙŠØ©
- âœ… Ù…ÙƒØ§ÙØ¢Øª ÙˆØ®ØµÙˆÙ…Ø§Øª Ø°ÙƒÙŠØ©

---

## ğŸ¯ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©: Quality Check Ùˆ PDF/Excel Export (1.5 Ø£Ø³Ø¨ÙˆØ¹)

### Ø§Ù„Ø£Ù‡Ø¯Ø§Ù
- Ù†Ø¸Ø§Ù… ÙØ­Øµ Ø¬ÙˆØ¯Ø© Ù…ØªÙƒØ§Ù…Ù„
- ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± PDF
- ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Excel
- ÙÙˆØ§ØªÙŠØ± Ø§Ø­ØªØ±Ø§ÙÙŠØ©

### ğŸ“ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©

#### 4.1 ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª
```bash
composer require barryvdh/laravel-dompdf
composer require maatwebsite/excel
```

#### 4.2 Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ Quality Checks
```php
Schema::create('quality_checks', function (Blueprint $table) {
    $table->id();
    $table->foreignId('production_order_id')->constrained();
    $table->foreignId('product_id')->constrained();
    $table->foreignId('inspector_id')->constrained('employees');
    $table->string('status'); // pending, passed, failed
    $table->integer('items_checked')->default(0);
    $table->integer('items_passed')->default(0);
    $table->integer('items_failed')->default(0);
    $table->json('defects')->nullable(); // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹ÙŠÙˆØ¨
    $table->text('notes')->nullable();
    $table->dateTime('inspection_date');
    $table->timestamps();
});
```

#### 4.3 Quality Check Workflow
```php
// QualityCheckController.php
public function inspect($productionOrderId)
{
    $order = ProductionOrder::findOrFail($productionOrderId);
    
    return view('quality.inspect', compact('order'));
}

public function submitInspection(Request $request, $orderId)
{
    $validated = $request->validate([
        'status' => 'required|in:passed,failed',
        'items_checked' => 'required|integer',
        'items_passed' => 'required|integer',
        'defects' => 'nullable|array',
        'notes' => 'nullable|string',
    ]);
    
    $check = QualityCheck::create([
        'production_order_id' => $orderId,
        'inspector_id' => auth()->id(),
        'inspection_date' => now(),
        ...$validated
    ]);
    
    $order = ProductionOrder::find($orderId);
    
    if ($validated['status'] === 'passed') {
        $order->status = 'quality_approved';
        $order->save();
    } else {
        $order->status = 'quality_rejected';
        $order->save();
        
        // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø¥Ù†ØªØ§Ø¬
        event(new QualityRejected($order));
    }
    
    return redirect()->route('quality.index')
        ->with('success', 'Quality check submitted successfully');
}
```

#### 4.4 PDF Export Service
```php
<?php
namespace App\Services;

use PDF;

class PDFExportService
{
    public function generateInvoice($invoiceId)
    {
        $invoice = Invoice::with(['order.customer', 'order.items'])
            ->findOrFail($invoiceId);
        
        $pdf = PDF::loadView('pdf.invoice', compact('invoice'));
        
        return $pdf->download('invoice-' . $invoice->invoice_no . '.pdf');
    }
    
    public function generatePayslip($payrollId)
    {
        $payroll = Payroll::with('employee')->findOrFail($payrollId);
        
        $pdf = PDF::loadView('pdf.payslip', compact('payroll'));
        
        return $pdf->download('payslip-' . $payroll->id . '.pdf');
    }
    
    public function generateProductionReport($orderId)
    {
        $order = ProductionOrder::with([
            'product',
            'stages.employee',
            'order.customer'
        ])->findOrFail($orderId);
        
        $pdf = PDF::loadView('pdf.production-report', compact('order'));
        
        return $pdf->download('production-' . $order->id . '.pdf');
    }
}
```

#### 4.5 Excel Export
```php
<?php
namespace App\Exports;

use Maatwebsite\Excel\Concerns\FromCollection;
use Maatwebsite\Excel\Concerns\WithHeadings;

class PayrollExport implements FromCollection, WithHeadings
{
    protected $month;
    
    public function __construct($month)
    {
        $this->month = $month;
    }
    
    public function collection()
    {
        return Payroll::with('employee')
            ->whereMonth('period_start', $this->month)
            ->get()
            ->map(function($payroll) {
                return [
                    $payroll->employee->name,
                    $payroll->base_salary,
                    $payroll->overtime_amount,
                    $payroll->bonuses,
                    $payroll->deductions,
                    $payroll->total_amount,
                    $payroll->status,
                ];
            });
    }
    
    public function headings(): array
    {
        return [
            'Employee',
            'Base Salary',
            'Overtime',
            'Bonuses',
            'Deductions',
            'Total',
            'Status'
        ];
    }
}

// Controller
public function exportPayroll($month)
{
    return Excel::download(
        new PayrollExport($month),
        'payroll-' . $month . '.xlsx'
    );
}
```

#### 4.6 PDF Templates

**invoice.blade.php**
```html
<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="utf-8">
    <title>Invoice #{{ $invoice->invoice_no }}</title>
    <style>
        body { font-family: 'DejaVu Sans', sans-serif; }
        .header { text-align: center; margin-bottom: 30px; }
        .invoice-details { margin: 20px 0; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: right; }
        th { background-color: #f4f4f4; }
        .total { font-size: 18px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Huda Fashion</h1>
        <p>ÙØ§ØªÙˆØ±Ø© Ø±Ù‚Ù…: {{ $invoice->invoice_no }}</p>
    </div>
    
    <div class="invoice-details">
        <p><strong>Ø§Ù„Ø¹Ù…ÙŠÙ„:</strong> {{ $invoice->order->customer->name }}</p>
        <p><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> {{ $invoice->issue_date->format('Y-m-d') }}</p>
        <p><strong>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨:</strong> {{ $invoice->order->order_number }}</p>
    </div>
    
    <table>
        <thead>
            <tr>
                <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
                <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                <th>Ø§Ù„Ø³Ø¹Ø±</th>
                <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
            </tr>
        </thead>
        <tbody>
            @foreach($invoice->order->items as $item)
            <tr>
                <td>{{ $item->product->name }}</td>
                <td>{{ $item->quantity }}</td>
                <td>{{ number_format($item->unit_price, 3) }} KWD</td>
                <td>{{ number_format($item->total, 3) }} KWD</td>
            </tr>
            @endforeach
        </tbody>
        <tfoot>
            <tr class="total">
                <td colspan="3">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</td>
                <td>{{ number_format($invoice->total_amount, 3) }} KWD</td>
            </tr>
        </tfoot>
    </table>
</body>
</html>
```

### âœ… Ù…Ø®Ø±Ø¬Ø§Øª Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©
- âœ… Ù†Ø¸Ø§Ù… ÙØ­Øµ Ø¬ÙˆØ¯Ø© Ù…ØªÙƒØ§Ù…Ù„
- âœ… ØªØµØ¯ÙŠØ± ÙÙˆØ§ØªÙŠØ± PDF
- âœ… ØªØµØ¯ÙŠØ± ÙƒØ´ÙˆÙ Ø±ÙˆØ§ØªØ¨ PDF
- âœ… ØªØµØ¯ÙŠØ± ØªÙ‚Ø§Ø±ÙŠØ± Excel
- âœ… ØªÙ‚Ø§Ø±ÙŠØ± Ø¥Ù†ØªØ§Ø¬ Ø§Ø­ØªØ±Ø§ÙÙŠØ©

---

## ğŸ¯ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø®Ø§Ù…Ø³Ø©: Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙˆØ§Ù„Ø£ØªÙ…ØªØ© (1 Ø£Ø³Ø¨ÙˆØ¹)

### Ø§Ù„Ø£Ù‡Ø¯Ø§Ù
- ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙÙˆØ±ÙŠØ© Ù„Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ù‡Ù…Ø©
- Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
- ØªÙ‚Ø§Ø±ÙŠØ± Ø¯ÙˆØ±ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
- Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù„Ù„Ù…Ø¯ÙŠØ±ÙŠÙ†

### ğŸ“ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©

#### 5.1 Ø¥Ù†Ø´Ø§Ø¡ Notifications

**LowStockAlert.php**
```php
<?php
namespace App\Notifications;

class LowStockAlert extends Notification
{
    protected $material;
    
    public function via($notifiable)
    {
        return ['mail', 'database'];
    }
    
    public function toMail($notifiable)
    {
        return (new MailMessage)
            ->subject('ØªÙ†Ø¨ÙŠÙ‡: Ù…Ø®Ø²ÙˆÙ† Ù…Ù†Ø®ÙØ¶')
            ->line('Ø§Ù„Ù…Ø§Ø¯Ø©: ' . $this->material->name)
            ->line('Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: ' . $this->material->current_stock)
            ->line('Ø­Ø¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø·Ù„Ø¨: ' . $this->material->reorder_level)
            ->action('Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø§Ø¯Ø©', route('materials.show', $this->material));
    }
}
```

**PayrollDueAlert.php**
**QualityCheckRequired.php**
**ProductionDelayAlert.php**

#### 5.2 Scheduled Tasks (Kernel.php)
```php
protected function schedule(Schedule $schedule)
{
    // Ù…Ø²Ø§Ù…Ù†Ø© WooCommerce ÙƒÙ„ 5 Ø¯Ù‚Ø§Ø¦Ù‚
    $schedule->command('woocommerce:sync')
        ->everyFiveMinutes();
    
    // ÙØ­Øµ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…Ù†Ø®ÙØ¶ ÙŠÙˆÙ…ÙŠØ§Ù‹
    $schedule->command('stock:check-low')
        ->daily();
    
    // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø±ÙˆØ§ØªØ¨ ÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø´Ù‡Ø±
    $schedule->command('payroll:generate-monthly')
        ->monthlyOn(25, '09:00');
    
    // ØªÙ‚Ø±ÙŠØ± Ø¥Ù†ØªØ§Ø¬ ÙŠÙˆÙ…ÙŠ
    $schedule->command('reports:daily-production')
        ->dailyAt('18:00');
    
    // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
    $schedule->command('cleanup:old-logs')
        ->weekly();
}
```

#### 5.3 Real-time Alerts Service
```php
<?php
namespace App\Services;

class AlertService
{
    public function checkProductionDelay()
    {
        $delayedOrders = ProductionOrder::where('status', 'in_production')
            ->where('expected_completion_date', '<', now())
            ->get();
        
        foreach ($delayedOrders as $order) {
            // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø¯ÙŠØ±
            $order->order->customer->notify(new ProductionDelayAlert($order));
        }
    }
    
    public function checkMaterialShortage()
    {
        $lowStock = Material::whereRaw(
            '(SELECT SUM(quantity) FROM material_inventories WHERE material_id = materials.id) <= reorder_level'
        )->get();
        
        foreach ($lowStock as $material) {
            User::role('manager')->each(function($user) use ($material) {
                $user->notify(new LowStockAlert($material));
            });
        }
    }
    
    public function checkQualityPending()
    {
        $pending = ProductionOrder::where('status', 'awaiting_quality_check')
            ->where('created_at', '<', now()->subHours(24))
            ->get();
        
        foreach ($pending as $order) {
            User::role('quality_inspector')->each(function($user) use ($order) {
                $user->notify(new QualityCheckRequired($order));
            });
        }
    }
}
```

#### 5.4 Event Listeners

**OrderCompletedListener.php**
```php
public function handle(OrderCompleted $event)
{
    // Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø¹Ù…ÙŠÙ„
    $event->order->customer->notify(new OrderReadyNotification($event->order));
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
    Cache::forget('dashboard_stats');
}
```

#### 5.5 Dashboard Real-time Updates
```javascript
// Ø§Ø³ØªØ®Ø¯Ø§Ù… Laravel Echo + Pusher
Echo.private('dashboard')
    .listen('ProductionUpdated', (e) => {
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        updateDashboardStats();
    })
    .listen('LowStockAlert', (e) => {
        // Ø¹Ø±Ø¶ ØªÙ†Ø¨ÙŠÙ‡
        showAlert('Low stock: ' + e.material.name);
    });
```

### âœ… Ù…Ø®Ø±Ø¬Ø§Øª Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø®Ø§Ù…Ø³Ø©
- âœ… ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙÙˆØ±ÙŠØ© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
- âœ… Ù…Ù‡Ø§Ù… Ù…Ø¬Ø¯ÙˆÙ„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- âœ… ØªÙ‚Ø§Ø±ÙŠØ± Ø¯ÙˆØ±ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
- âœ… Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù„Ù„Ù…Ø¯ÙŠØ±ÙŠÙ† ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Ø¡
- âœ… ØªØ­Ø¯ÙŠØ«Ø§Øª Ù„Ø­Ø¸ÙŠØ© ÙÙŠ Dashboard

---

## ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

### Ø¬Ø¯Ø§ÙˆÙ„ Ø¬Ø¯ÙŠØ¯Ø© (5):
1. âœ… `attendance_records` - Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ±
2. âœ… `production_logs` - Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø¨Ø§Ù„Ù‚Ø·Ø¹Ø©
3. âœ… `quality_checks` - ÙØ­ÙˆØµØ§Øª Ø§Ù„Ø¬ÙˆØ¯Ø©
4. âœ… `notifications` - Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª (Laravel default)
5. âœ… `failed_jobs` - Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ÙØ§Ø´Ù„Ø© (Laravel default)

### ØªØ­Ø¯ÙŠØ«Ø§Øª Ø¹Ù„Ù‰ Ø¬Ø¯Ø§ÙˆÙ„ Ù…ÙˆØ¬ÙˆØ¯Ø©:
1. âœ… `employees` - Ø¥Ø¶Ø§ÙØ© QR, skills, rates
2. âœ… `production_stages` - Ø¥Ø¶Ø§ÙØ© expected_duration

---

## ğŸ“¦ Ø§Ù„Ø­Ø²Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (Composer)

```bash
composer require simplesoftwareio/simple-qrcode
composer require barryvdh/laravel-dompdf
composer require maatwebsite/excel
composer require pusher/pusher-php-server
```

---

## ğŸ¯ Ø§Ù„Ù…Ø®Ø±Ø¬Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©

Ø¨Ø¹Ø¯ Ø¥ÙƒÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ØŒ Ø³ÙŠÙƒÙˆÙ† Ù„Ø¯ÙŠÙƒ:

### âœ… Ù†Ø¸Ø§Ù… Ø­Ø¶ÙˆØ± ÙˆØ§Ù†ØµØ±Ø§Ù ÙƒØ§Ù…Ù„
- ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„/Ø®Ø±ÙˆØ¬
- Ø­Ø³Ø§Ø¨ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„
- ØªØªØ¨Ø¹ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ
- ØªÙ‚Ø§Ø±ÙŠØ± Ø­Ø¶ÙˆØ± Ø´Ù‡Ø±ÙŠØ©

### âœ… Ù†Ø¸Ø§Ù… Ø¥Ù†ØªØ§Ø¬ Ù…ØªÙ‚Ø¯Ù…
- QR Code Ù„Ù„Ø¹Ù…Ø§Ù„
- ØªØªØ¨Ø¹ Ø¥Ù†ØªØ§Ø¬ Ø¨Ø§Ù„Ù‚Ø·Ø¹Ø©
- Auto-assign Ø°ÙƒÙŠ
- ØªØ³Ø¬ÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„ÙˆÙ‚Øª

### âœ… Ù†Ø¸Ø§Ù… Ø±ÙˆØ§ØªØ¨ Ø°ÙƒÙŠ
- Ø­Ø³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ©
- Ù…ÙƒØ§ÙØ¢Øª ÙˆØ®ØµÙˆÙ…Ø§Øª Ø°ÙƒÙŠØ©
- Ù‚ÙŠÙˆØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
- ÙƒØ´ÙˆÙ Ø±ÙˆØ§ØªØ¨ PDF

### âœ… Ù†Ø¸Ø§Ù… Ø¬ÙˆØ¯Ø© Ù…ØªÙƒØ§Ù…Ù„
- ÙØ­Øµ Ù‚Ø¨Ù„ Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯
- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¹ÙŠÙˆØ¨
- Ø¥Ø¹Ø§Ø¯Ø© Ù„Ù„Ø¥Ù†ØªØ§Ø¬
- ØªÙ‚Ø§Ø±ÙŠØ± Ø¬ÙˆØ¯Ø©

### âœ… ØªØµØ¯ÙŠØ± Ø§Ø­ØªØ±Ø§ÙÙŠ
- ÙÙˆØ§ØªÙŠØ± PDF
- ØªÙ‚Ø§Ø±ÙŠØ± Excel
- ÙƒØ´ÙˆÙ Ø±ÙˆØ§ØªØ¨
- ØªÙ‚Ø§Ø±ÙŠØ± Ø¥Ù†ØªØ§Ø¬

### âœ… ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙˆØ£ØªÙ…ØªØ©
- Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙÙˆØ±ÙŠØ©
- Ù…Ù‡Ø§Ù… Ù…Ø¬Ø¯ÙˆÙ„Ø©
- ØªÙ‚Ø§Ø±ÙŠØ± Ø¯ÙˆØ±ÙŠØ©
- ØªØ­Ø¯ÙŠØ«Ø§Øª Ù„Ø­Ø¸ÙŠØ©

---

## ğŸ“ˆ Ù…Ù‚Ø§ÙŠÙŠØ³ Ø§Ù„Ù†Ø¬Ø§Ø­

### Ù‚Ø¨Ù„ Ø§Ù„ØªÙ†ÙÙŠØ°:
- âŒ Ø­Ø³Ø§Ø¨ Ø¹Ù…Ø§Ù„Ø© ØªÙ‚Ø±ÙŠØ¨ÙŠ (30% Ø«Ø§Ø¨Øª)
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØªØ¨Ø¹ Ø­Ø¶ÙˆØ±
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ QR
- âŒ Ø±ÙˆØ§ØªØ¨ ÙŠØ¯ÙˆÙŠØ©
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙØ­Øµ Ø¬ÙˆØ¯Ø© Ù…Ù†Ø¸Ù…
- âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ‚Ø§Ø±ÙŠØ± PDF

### Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ†ÙÙŠØ°:
- âœ… Ø­Ø³Ø§Ø¨ Ø¹Ù…Ø§Ù„Ø© Ø¯Ù‚ÙŠÙ‚ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª ÙØ¹Ù„ÙŠØ©
- âœ… ØªØªØ¨Ø¹ Ø­Ø¶ÙˆØ± ØªÙ„Ù‚Ø§Ø¦ÙŠ
- âœ… QR Ù„Ù„Ø¹Ù…Ø§Ù„
- âœ… Ø±ÙˆØ§ØªØ¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ©
- âœ… ÙØ­Øµ Ø¬ÙˆØ¯Ø© Ù…Ù†Ø¸Ù…
- âœ… ØªÙ‚Ø§Ø±ÙŠØ± PDF/Excel Ø§Ø­ØªØ±Ø§ÙÙŠØ©

---

## ğŸš€ Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°

### Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø£ÙˆÙ„Ù‰:
```bash
git checkout -b feature/production-workflow-complete
```

### ØªØ±ØªÙŠØ¨ Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ù‚ØªØ±Ø­:
1. Ø§Ø¨Ø¯Ø£ Ø¨Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1 (Attendance + Production Logs)
2. Ø«Ù… Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2 (QR + Auto-assign)
3. Ø«Ù… Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3 (Payroll Integration)
4. Ø«Ù… Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4 (Quality + PDF)
5. Ø£Ø®ÙŠØ±Ø§Ù‹ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 5 (Alerts + Automation)

### Testing Ø¨Ø¹Ø¯ ÙƒÙ„ Ù…Ø±Ø­Ù„Ø©:
- âœ… Unit tests
- âœ… Feature tests
- âœ… Manual testing
- âœ… User acceptance testing

---

## ğŸ“ Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø©

### Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙ†ÙÙŠØ°:
- Ù…Ø±Ø§Ø¬Ø¹Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© Ù„Ù„ØªÙ‚Ø¯Ù…
- Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ÙÙ†ÙŠØ©
- Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
- ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†

### Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ†ÙÙŠØ°:
- Ø¯Ø¹Ù… ÙÙ†ÙŠ Ù„Ù…Ø¯Ø© Ø´Ù‡Ø±
- ØªØ­Ø¯ÙŠØ«Ø§Øª ÙˆØªØ­Ø³ÙŠÙ†Ø§Øª
- ØªØ¯Ø±ÙŠØ¨ Ø¥Ø¶Ø§ÙÙŠ
- ØªÙˆØ«ÙŠÙ‚ ÙƒØ§Ù…Ù„

---

**Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:** {{ now()->format('Y-m-d') }}  
**Ø§Ù„Ø­Ø§Ù„Ø©:** ğŸ“‹ Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙ†ÙÙŠØ°  
**Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:** 6-8 Ø£Ø³Ø§Ø¨ÙŠØ¹  
**Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„ Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ†ÙÙŠØ°:** 100% âœ…

