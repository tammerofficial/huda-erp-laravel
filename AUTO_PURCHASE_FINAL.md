# ๐ค ูุธุงู ุงูุดุฑุงุก ุงูุชููุงุฆู - ุงููุณุฎุฉ ุงูููุงุฆูุฉ

## โ ุงูุชุญุฏูุซุงุช ุงูููุงุฆูุฉ

### ุงูุชุงุฑูุฎ: 22 ุฃูุชูุจุฑ 2025
### ุงูุฅุตุฏุงุฑ: 2.0

---

## ๐ ุงูุชุบููุฑุงุช ุงููุทุจูุฉ

### 1. ุฅุฒุงูุฉ ุงูุฃุฒุฑุงุฑ ุงููุฏููุฉ โ
ุชู ุฅุฒุงูุฉ:
- โ ุฒุฑ "Create Auto Purchase Orders" ูู ุตูุญุฉ Materials
- โ ุฒุฑ "Create Auto Purchase Orders" ูู ุตูุญุฉ Low Stock Alert
- โ Route: `materials.create-auto-purchase`
- โ Method: `MaterialController@createAutoPurchaseOrders`

### 2. ุงููุธุงู ุงูุชููุงุฆู ุงููุงูู โ
ุงูุขู ุงููุธุงู ูุนูู **ุชููุงุฆูุงู ุจุงููุงูู**:
```
โฐ ูู ููู 9:00 ุตุจุงุญุงู
๐ ููุญุต ุฌููุน ุงูููุงุฏ
โ๏ธ ููุชุดู ุงูููุงุฏ ุงูููุฎูุถุฉ
๐ค ููุดุฆ ุทูุจุงุช ุงูุดุฑุงุก ุชููุงุฆูุงู
๐ง (ูุณุชูุจูุงู: ูุฑุณู ุฅุดุนุงุฑุงุช)
```

### 3. ุฅุตูุงุญ ุฎุทุฃ ุงูุนูุงูุฉ โ
ุงููุดููุฉ:
```
RelationNotFoundException: Call to undefined relationship [items]
```

ุงูุญู:
- โ ุฃุถูุช ุนูุงูุฉ `items()` ูู alias ูู `purchaseOrderItems()`
- โ ุงูุขู ูููู ุงุณุชุฎุฏุงู `$order->items` ุฃู `$order->purchaseOrderItems`

---

## ๐ฏ ููู ูุนูู ุงููุธุงู ุงูุขู

### ุงููุฑุงุญู ุงูุชููุงุฆูุฉ:

#### 1๏ธโฃ ุงููุญุต ุงููููู (8:00 ุตุจุงุญุงู)
```bash
php artisan stock:check-low
```
**ุงููุชูุฌุฉ**: ุชูุฑูุฑ ุจุงูููุงุฏ ุงูููุฎูุถุฉ (ุจุฏูู ุฅูุดุงุก ุทูุจุงุช)

#### 2๏ธโฃ ุงูุดุฑุงุก ุงูุชููุงุฆู (9:00 ุตุจุงุญุงู)
```bash
php artisan stock:check-low --create-orders
```
**ุงููุชูุฌุฉ**:
- ๐ ููุญุต ุฌููุน ุงูููุงุฏ
- โ๏ธ ูุญุฏุฏ ุงูููุงุฏ ุฃูู ูู ุงูุญุฏ ุงูุฃุฏูู
- ๐ญ ูุฌูุน ุงูููุงุฏ ุญุณุจ ุงูููุฑูุฏ
- ๐ ููุดุฆ ุทูุจ ุดุฑุงุก ูุงุญุฏ ููู ููุฑุฏ
- โ ุญุงูุฉ ุงูุทูุจ: Pending
- ๐ ุชุงุฑูุฎ ุงูุชุณููู: +7 ุฃูุงู

---

## ๐ ุงุฎุชุจุงุฑ ุงููุธุงู

### ุชู ุงุฎุชุจุงุฑ ุงููุธุงู ุจูุฌุงุญ โ

#### ุงูููุงุฏ ุงููุฎุชุจุฑุฉ:
1. **Italian Silk - Ivory**
   - SKU: SLK-ITL-001
   - ุงููุฎุฒูู ุงูุญุงูู: 2 ูุชุฑ
   - ุงูุญุฏ ุงูุฃุฏูู: 5 ูุชุฑ
   - ุงูููุฑุฏ: Silk & Satin House
   - โ ุชู ุฅูุดุงุก ุทูุจ ุดุฑุงุก: AUTO-PO-20251022-0001

2. **French Lace - Gold**
   - SKU: LAC-FRN-007
   - ุงููุฎุฒูู ุงูุญุงูู: 1 ูุชุฑ
   - ุงูุญุฏ ุงูุฃุฏูู: 5 ูุชุฑ
   - ุงูููุฑุฏ: Chiffon & Lace Gallery
   - โ ุชู ุฅูุดุงุก ุทูุจ ุดุฑุงุก: AUTO-PO-20251022-0002

#### ุทูุจุงุช ุงูุดุฑุงุก ุงููููุดุฃุฉ:

**Orden 1:**
```
๐ ุฑูู ุงูุทูุจ: AUTO-PO-20251022-0001
๐ญ ุงูููุฑุฏ: Silk & Satin House
๐ฐ ุงููุจูุบ: 2,250 ุฏููุงุฑ ูููุชู
๐ฆ ุงูููุงุฏ:
   โข Italian Silk - Ivory
     ุงููููุฉ: 50 ูุชุฑ
     ุงูุณุนุฑ: 45 ุฏููุงุฑ/ูุชุฑ
```

**Orden 2:**
```
๐ ุฑูู ุงูุทูุจ: AUTO-PO-20251022-0002
๐ญ ุงูููุฑุฏ: Chiffon & Lace Gallery
๐ฐ ุงููุจูุบ: 3,250 ุฏููุงุฑ ูููุชู
๐ฆ ุงูููุงุฏ:
   โข French Lace - Gold
     ุงููููุฉ: 50 ูุชุฑ
     ุงูุณุนุฑ: 65 ุฏููุงุฑ/ูุชุฑ
```

---

## ๐ง ุงูุชูููู ุงููุทููุจ

### ูุชูุนูู ุงููุธุงู ุงูุชููุงุฆู:

#### ูู ุงูุชุทููุฑ:
```bash
php artisan schedule:work
```
ูุจูู ุดุบูุงู ููุฑุงูุจ ุงูููุงุนูุฏ

#### ูู ุงูุฅูุชุงุฌ:
ุฃุถู ุฅูู crontab:
```bash
* * * * * cd /path-to-project && php artisan schedule:run >> /dev/null 2>&1
```

---

## ๐ฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุตูุญุฉ Materials:
- ๐ ุฒุฑ "Low Stock Alert" (ููุนุฑุถ ููุท)
- ๐ต ุฒุฑ "Add New Material"
- โ ุนุฑุถ ุงููููุงุช ุงููุนููุฉ
- โ๏ธ ุชูุจููุงุช ุจุตุฑูุฉ ูููุฎุฒูู ุงูููุฎูุถ

### ุตูุญุฉ Low Stock Alert:
- ๐ ุฅุญุตุงุฆูุงุช ุงูููุงุฏ ุงูููุฎูุถุฉ
- ๐ ุฌุฏูู ุชูุตููู ุจุงููููุงุช
- ๐ฐ ุงูุชูุงููู ุงูุชูุฏูุฑูุฉ
- ๐ค ุฑุณุงูุฉ: "ุณูุชู ุงูุดุฑุงุก ุชููุงุฆูุงู ุงูุณุงุนุฉ 9 ุตุจุงุญุงู"
- โ **ูุง ููุฌุฏ** ุฒุฑ ุฅูุดุงุก ูุฏูู

---

## ๐ฏ ูุชู ูุชู ุฅูุดุงุก ุทูุจุงุช ุงูุดุฑุงุกุ

### ุงูุดุฑูุท ุงููุทููุจุฉ (ALL):
1. โ `auto_purchase_enabled = true`
2. โ `is_active = true`
3. โ `available_quantity <= min_stock_level`
4. โ ุงููุงุฏุฉ ูุฏููุง `supplier_id` (ูุณุชุญุณู)

### ุงูุชูููุช:
- โฐ **ุชููุงุฆูุงู**: ูู ููู 9:00 ุตุจุงุญุงู
- ๐ฑ๏ธ **ูุฏููุงู**: `php artisan stock:check-low --create-orders`

---

## ๐ ุณูุฑ ุงูุนูู ุงููุงูู

```
1. ูุฎุฒูู ุงููุงุฏุฉ ููุฎูุถ
   โ
2. ูุตู ููุญุฏ ุงูุฃุฏูู (min_stock_level)
   โ
3. ุงููุธุงู ููุชุดููุง ูู ุงููุญุต ุงููููู (8 ุตุจุงุญุงู)
   โ
4. ูุชู ุชุถููููุง ูู ุตูุญุฉ Low Stock Alert
   โ
5. ุงูุณุงุนุฉ 9 ุตุจุงุญุงู: ุฅูุดุงุก ุทูุจ ุดุฑุงุก ุชููุงุฆู
   โ
6. ุงูุทูุจ ูุธูุฑ ูู Purchase Orders ุจุญุงูุฉ Pending
   โ
7. ุงููุฏูุฑ ูุฑุงุฌุน ุงูุทูุจ
   โ
8. ูุบูุฑ ุงูุญุงูุฉ ุฅูู Approved
   โ
9. ูุฑุณู ููููุฑุฏ
   โ
10. ุนูุฏ ุงูุงุณุชูุงู: ูุบูุฑ ุงูุญุงูุฉ ุฅูู Delivered
```

---

## ๐ก ูุตุงุฆุญ ุงูุงุณุชุฎุฏุงู

### ูููุฏูุฑูู:
1. โ ุฑุงุฌุน ุตูุญุฉ Low Stock Alert ููููุงู
2. โ ุชุญูู ูู Purchase Orders ุงูุณุงุนุฉ 9:30 ุตุจุงุญุงู
3. โ ุฑุงุฌุน ุงูุทูุจุงุช ุงูุชููุงุฆูุฉ (AUTO-PO-*)
4. โ ูุงูู ุนูู ุงูุทูุจุงุช ุฃู ุนุฏูููุง ุญุณุจ ุงูุญุงุฌุฉ
5. โ ุฑุงุฌุน ุฅุนุฏุงุฏุงุช Auto-Purchase ุดูุฑูุงู

### ูุถุจุท ุงูุฅุนุฏุงุฏุงุช:
```
Materials โ Edit Material

ุถุจุท:
- Auto Purchase Enabled: Yes/No
- Min Stock Level: ุญุณุจ ุงูุงุณุชููุงู
- Auto Purchase Quantity: ุญุณุจ ูุนุฏู ุงูุทูุจ
- Supplier: ุงุฎุชุฑ ุงูููุฑุฏ ุงูุงูุชุฑุงุถู
```

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูู ูุชู ุฅูุดุงุก ุทูุจุงุช ุชููุงุฆูุฉ
**ุงูุญููู:**
1. ุชุฃูุฏ ูู ุชุดุบูู Scheduler:
   ```bash
   ps aux | grep schedule
   ```
2. ุฌุฑูุจ ุงูุฃูุฑ ูุฏููุงู:
   ```bash
   php artisan stock:check-low --create-orders
   ```
3. ุชุญูู ูู ุงูู logs:
   ```bash
   tail -f storage/logs/laravel.log
   ```

### ุงููุดููุฉ: ุฎุทุฃ ูู ุงูุนูุงูุฉ `items`
**ุงูุญู:** โ ุชู ุฅุตูุงุญู!
- ุฃุถููุง alias `items()` ูู PurchaseOrder model

### ุงููุดููุฉ: ุงููุฎุฒูู ูุง ูุธูุฑ
**ุงูุญู:**
1. ุชุฃูุฏ ูู ูุฌูุฏ ุณุฌูุงุช ูู `material_inventories`
2. ุงุณุชุฎุฏู "Adjust Inventory" ูุฅุถุงูุฉ ูุฎุฒูู

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### Models:
- โ `app/Models/PurchaseOrder.php`
  - ุฃุถููุง: `items()` relationship

### Controllers:
- โ `app/Http/Controllers/MaterialController.php`
  - ุฃุฒููุง: `createAutoPurchaseOrders()` method
  - ุฃุจูููุง: `lowStock()` method (ุนุฑุถ ููุท)

### Commands:
- โ `app/Console/Commands/CheckLowStockCommand.php`
  - ุฃุถููุง: `final_amount` ูู PurchaseOrder creation

### Views:
- โ `resources/views/materials/index.blade.php`
  - ุฃุฒููุง: ุฒุฑ "Auto Purchase"
  - ุฃุจูููุง: ุฒุฑ "Low Stock Alert"

- โ `resources/views/materials/low-stock.blade.php`
  - ุฃุฒููุง: ุฒุฑ "Create Auto Purchase Orders"
  - ุฃุถููุง: ุฑุณุงูุฉ ุชูุถูุญูุฉ ุนู ุงูุดุฑุงุก ุงูุชููุงุฆู

### Routes:
- โ `routes/web.php`
  - ุฃุฒููุง: `materials.create-auto-purchase` route
  - ุฃุจูููุง: `materials.low-stock` route

### Scheduler:
- โ `app/Console/Kernel.php`
  - 8:00 ุตุจุงุญุงู: ูุญุต ููุท
  - 9:00 ุตุจุงุญุงู: ูุญุต + ุฅูุดุงุก ุทูุจุงุช

---

## โจ ุงูููุฒุงุช ุงูููุงุฆูุฉ

- โ ูุญุต ุชููุงุฆู ูููู
- โ ุฅูุดุงุก ุทูุจุงุช ุชููุงุฆู
- โ ุชุฌููุน ุญุณุจ ุงูููุฑุฏ
- โ ุนุฑุถ ุชูุตููู ููููุงุฏ ุงูููุฎูุถุฉ
- โ ุชูุจููุงุช ุจุตุฑูุฉ
- โ ุญุณุงุจ ุงูุชูุงููู ุชููุงุฆูุงู
- โ ูุงุฌูุฉ ูุธููุฉ ุจุฏูู ุฃุฒุฑุงุฑ ูุฏููุฉ
- โ ูุธุงู ูุงูู ูุง ูุญุชุงุฌ ุชุฏุฎู ูุฏูู

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

ุชู ุงูุชุทููุฑ ุงููุงูู ูููุธุงู! ุงูุขู:

1. โ ุงููุธุงู ุฌุงูุฒ ููุฅูุชุงุฌ
2. โ ุฌููุน ุงูุฃุฎุทุงุก ุชู ุฅุตูุงุญูุง
3. โ ุงูุงุฎุชุจุงุฑ ูุฌุญ 100%
4. โ ุงูุชูุซูู ูุงูู

### ููุชุดุบูู ูู ุงูุฅูุชุงุฌ:
```bash
# 1. ุชุฃูุฏ ูู Scheduler
crontab -e
# ุฃุถู: * * * * * cd /path && php artisan schedule:run

# 2. ุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช
php artisan stock:check-low

# 3. ุงุชุฑูู ูุนูู ุชููุงุฆูุงู!
```

---

**ุงููุธุงู ุงูุขู ูุนูู ุจุดูู ุชููุงุฆู ูุงูู!** ๐

**ุชู ุงูุชุทููุฑ**: 22 ุฃูุชูุจุฑ 2025  
**ุงููุณุฎุฉ**: 2.0  
**ุงูุญุงูุฉ**: โ Production Ready
**ุงููุธุงู**: Huda ERP - Haute Couture Management System
